/** * $Id: QrtzBeanFactory.java,v 1.0 2018/11/17 12:43 PM chenmin Exp $ * <p> * Copyright 2018 Beijing Ultrapower Software Of Shanghai Co.Ltd */package com.github.quartz.annotation;import com.github.quartz.model.entity.QrtzTimedTask;import com.github.quartz.model.entity.QrtzTimedTaskParam;import com.github.quartz.utils.StringUtil;import org.springframework.util.ObjectUtils;import java.util.ArrayList;import java.util.List;/** * @author chenmin * @version $Id: QrtzBeanFactory.java,v 1.1 2018/11/17 12:43 PM chenmin Exp $ * Created on 2018/11/17 12:43 PM */public class QrtzBeanBuilder {    private QrtzTimedTask qrtzTimedTask;    private QuartzDefinition quartzDefinition;    private QrtzBeanBuilder() {        this.qrtzTimedTask = new QrtzTimedTask();    }    public static QrtzBeanBuilder create() {        return new QrtzBeanBuilder();    }    public QrtzTimedTask build() {        QuartzDefinition quartzDefinition = this.quartzDefinition;        String arguments = quartzDefinition.arguments();        String taskName = quartzDefinition.taskName();        String targetBean = quartzDefinition.targetBean();        String targetMethod = quartzDefinition.targetMethod();        String cronExpression = quartzDefinition.cronExpression();        List<QrtzTimedTaskParam> params = new ArrayList<QrtzTimedTaskParam>();        if (ObjectUtils.isEmpty(arguments)) {            String[] args = StringUtil.delimitedListToStringArray(arguments, ",");            if (!ObjectUtils.isEmpty(args)) {                for (int i = 0; i < args.length; i++) {                    QrtzTimedTaskParam param = new QrtzTimedTaskParam();                    param.setParamKey(String.valueOf(i + 1));                    param.setParamValue(args[i]);                    params.add(param);                }            }        }        this.qrtzTimedTask.setTaskName(taskName);        this.qrtzTimedTask.setTaskMethod(targetMethod);        this.qrtzTimedTask.setTaskExpres(cronExpression);        this.qrtzTimedTask.setQrtzTimedTaskParams(params);        return this.getQrtzTimedTask();    }    public QrtzBeanBuilder setQuartzDefinition(QuartzDefinition quartzDefinition) {        this.quartzDefinition = quartzDefinition;        return this;    }    public QrtzTimedTask getQrtzTimedTask() {        return qrtzTimedTask;    }}